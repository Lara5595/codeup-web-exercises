<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mapbox assignment</title>
  <script src="js/keys.js"></script>  <!-- this hides your keys -->
  <!--    this is a link for mapbox library-->
  <script src='https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.js'></script>
  <link href='https://api.mapbox.com/mapbox-gl-js/v2.10.0/mapbox-gl.css' rel='stylesheet' />
  <!--    boostrap-->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
  <!--    geocoder.js link-->
  <script src="js/mapbox-geocoder-utils.js"></script>

  <style>
    #map {
      width: 75%;
      height: 700px;
    }
  </style>
</head>
<body>
<div class="container row mx-auto">  <!-- container for map -->
    <div id='map' class="mx-auto mt-4"></div>
</div>

<script src="js/jquery-3.6.1.min.js"></script>

<script>
<!--    this creates map-->
    mapboxgl.accessToken = MAPBOX_API_TOKEN;  //we gave our token a var MAPBOX on keys.js
    const map = new mapboxgl.Map({
        container: 'map', // container ID
        style: 'mapbox://styles/mapbox/satellite-streets-v11', // style URL
        center: [-74.5, 40], // starting position [lng, lat]
        zoom: 9, // starting zoom
        projection: 'globe' // display the map as a 3D globe
    });
    map.on('style.load', () => {
        map.setFog({}); // Set the default atmosphere style

    });
map.setCenter([-99.48962, 29.42692]);

//    creates map^^^^^

//Generate a map that shows the city with your favorite restaurant using geocoding.
// const favoriteResMarker = new mapboxgl.Marker()   // this adds a marker to the ap
//     .setLngLat([-98.488782, 29.4237])
//     .addTo(map);
// popout


//Redraw the map of the above location at zoom levels 5, 15, and 20. Do this by simply changing the value of zoom level where the map properties are initially set and refresh the page to see the changes. Can the zoom be changed programmatically after the initial map is drawn?
map.setZoom(5)
// map.setZoom(15)
// map.setZoom(20)


//Create a marker on your map of the exact location of your favorite restaurant set the zoom to allow for best viewing distance.
// const favoriteResMarker = new mapboxgl.Marker()   // this adds a marker to the ap
//     .setLngLat([-98.488782, 29.4237])
//     .addTo(map);

// Create a popup with the name of the restaurant.
// Make sure the info window does not display until the marker has been clicked on.

// const favoriteResPopup = new mapboxgl.Popup()    // this let you add a popup to the map
//     .setHTML('<p class="mt-3" style="width: 100px">Whataburger</p>');
// favoriteResMarker.setPopup(favoriteResPopup);

// Refactor your code to display at least three of your favorite restaurants with information about each. Create an array of objects with information about each restaurant to accomplish this. Use a .forEach() loop rather than a for loop.


let restaurants = [
    {
        "Name": "Whataburger",
        "Categories": "Burgers",
        "Coordinates": [-98.488782, 29.4237]
    },

    {
        "Name": "Texas Roadhouse",
        "Categories": "Steak",
        "Coordinates": [-99.50434, 27.55508]
    },
    {
        "Name": "McDonalds",
        "Categories": "Burgers",
        "Coordinates": [-98.499152, 29.440015]
    },
    {
        "Name": "Taco Mais",
        "Categories": "Tacos",
        "Coordinates": [-99.471503, 27.49064]
    }
]

    // with the forEach whenever you add a restaurant to the array it adds it on the map.


    restaurants.forEach(function(value){
    let newMarker = new mapboxgl.Marker()  // this is the function what we use to add a marker
        .setLngLat(value.Coordinates)    // setLngLat adds the coordinates and value.coor gets coor from array
        .addTo(map);                    // addTo adds it to the map
    let newPop = new mapboxgl.Popup()           // this is the function we used to add a popup
        .setHTML(`<p class="mt-3" style="width: 250px;">${value.Name}, ${value.Categories}</p>`); // set Html adds it to html
        newMarker.setPopup(newPop);        //  this adds a popup to  the map
    });





</script>
</body>
</html>